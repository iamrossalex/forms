<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Forms DEMO</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="stylesheet" type="text/css" href="css/Worms/Worms.css">
	<script src="js/editorjs/Editor.js"></script>
	<script src="js/editorjs/tools/Header.js"></script>
	<script src="js/editorjs/tools/LinkTool.js"></script>
	<script src="js/editorjs/tools/RawTool.js"></script>
	<script src="js/editorjs/tools/SimpleImage.js"></script>
	<script src="js/editorjs/tools/ImageTool.js"></script>
	<script src="js/editorjs/tools/List.js"></script>
	<script src="js/editorjs/tools/Embed.js"></script>
	<script src="js/editorjs/tools/Quote.js"></script>
	<script src="js/editorjs/tools/Table.js"></script>
	<script src="js/editorjs/tools/CodeTool.js"></script>
	<style>
		* {
			box-sizing: border-box;
			font-family: 'Roboto', sans-serif;
		}
		#targetForm {
			margin-bottom: 3rem;
		}
		#submitFirst {
			display: inline-block;
			text-decoration: none;
			border: var(--px, 1px) solid #eeeeee;
			padding: .8rem 1.5rem;
		}
		#submitFirst:hover {
			background-color: #cccccc;
		}
	</style>
</head>
<body>
	<h1>Worms form</h1>
	<div id="targetForm"></div>
	<div><a href="" id="submitFirst">Submit</a></div>
	<div id="log"></div>

	<script type="module">
		import {Worms} from "./js/Worms/Worms.js";
		document.querySelector("#submitFirst").worm = new Worms({
			target: "#targetForm",
			action: "info.php",
			method: "POST",
			enctype: "multipart/form-data",
			events: {
				submit: (values) => {
					console.log(values);
				}
			},
			nodes: [
				{
					type: "Layouts",
					name: "mainLayout",
					layout: 12,
					nodes: [
						[
							{
								name: "images",
								type: "Images",
								title: "Images",
								width: 400,
								// height: 600,
								values: [
									"https://images.unsplash.com/photo-1550401732-f2615d09b2d4?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80",
									"https://images.unsplash.com/photo-1578853031105-8025ec148ce8?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=874&q=80",
									"https://images.unsplash.com/photo-1464790719320-516ecd75af6c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80",
									"https://images.unsplash.com/photo-1564221710304-0b37c8b9d729?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80",
									"https://images.unsplash.com/photo-1541777750-47555f6eddaf?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80"
								]
							}
						],
						[
							{
								type: "Tabs",
								name: "languageTabs",
								labels: [
									"Text", "Select", "Selectable", "Editor", "Expandable", "Dependable"
								],
								nodes: [
									[
										{
											name: "text",
											type: "Text",
											mode: "text",
											required: true,
											title: "Text field",
											placeholder: "",
											value: ""
										},
										{
											name: "num",
											type: "Text",
											mode: "number",
											required: true,
											title: "Number",
											placeholder: "",
											value: ""
										},
										{
											name: "time",
											type: "Text",
											mode: "time",
											required: true,
											title: "Time",
											placeholder: "",
											value: ""
										},
										{
											name: "email",
											type: "Text",
											mode: "email",
											required: true,
											title: "Email",
											placeholder: "",
											value: ""
										},
										{
											name: "password",
											type: "Text",
											mode: "password",
											required: true,
											title: "Password",
											placeholder: "",
											value: ""
										},
										{
											name: "date",
											type: "Text",
											mode: "date",
											required: true,
											title: "Date",
											placeholder: "",
											value: ""
										},
										{
											name: "bio",
											type: "Text",
											mode: "textarea",
											required: true,
											title: "Your short Bio",
											placeholder: "Start typing...",
											value: "Lorem, ipsum dolor sit amet consectetur adipisicing elit. Totam, vel officia iure dolorum nam aspernatur repudiandae debitis ea adipisci alias!"
										}
									],
									[
										{
											name: "selectfield",
											type: "Select",
											title: "Select field",
											placeholder: "Select",
											values: [
												{
													label: "Group",
													values: [
														{
															title: "Option 1",
															value: "opt-1"
														},
														{
															title: "Option 2",
															value: "opt-2",
															checked: true
														}
													]
												}
											]
										}
									],
									[
										{
											name: "selectableradio",
											type: "Selectable",
											mode: "radio",
											title: "Selectable field",
											values: [
												{
													title: "Option 1",
													value: "opt-1"
												},
												{
													title: "Option 2",
													value: "opt-2"
												}
											]
										},
										{
											name: "selectablecheck",
											type: "Selectable",
											mode: "checkbox",
											title: "Selectable field",
											values: [
												{
													title: "Option 1",
													value: "opt-1"
												},
												{
													title: "Option 2",
													value: "opt-2"
												}
											]
										}
									],
									[
										{
											name: "page",
											type: "Editor",
											title: "Full page",
											placeholder: "Just start typing...",
											value: '<h1 data-type="header">Text</h1><p data-type="paragraph">Get the first block type</p><ul data-type="list"><li>One</li><li>Two</li><li>Three</li></ul>'
										}
									],
									[
										{
											name: "exp1",
											type: "Expandable",
											title: "Expandable List",
											nodes: [

											]
										}
									],
									[
										{
											name: "mark",
											type: "Select",
											title: "Mark",
											placeholder: "Select",
											values: [
												{
													label: "Group",
													values: [
														{
															title: "Audi",
															value: "audi"
														},
														{
															title: "Bmw",
															value: "bmw",
															checked: true
														},
														{
															title: "Mercedes",
															value: "mercedes"
														}
													]
												}
											]
										},
										{
											name: "model",
											type: "Select",
											title: "Model",
											placeholder: "Select",
											dependency: ["mark"],
											values: {
												"audi": [
													{
														title: "A1",
														value: "a1"
													},
													{
														title: "A2",
														value: "a2"
													},
													{
														title: "A3",
														value: "a3"
													},
													{
														title: "A4",
														value: "a4"
													}
												],
												"bmw": [
													{
														title: "1-series",
														value: "1"
													},
													{
														title: "2-series",
														value: "2"
													},
													{
														title: "3-series",
														value: "3"
													}
												],
												"mercedes": [
													{
														title: "A class",
														value: "a"
													},
													{
														title: "C-class",
														value: "c"
													},
													{
														title: "E-class",
														value: "e"
													}
												]
											},
										},
										{
											name: "yearbuild",
											type: "Select",
											title: "Year",
											placeholder: "Select",
											dependency: ["mark", "model"],
											values: function(mark = null, model = null) {
												if (mark == null && model == null) return null;
												if (mark == '' || model == '') return null;
												const values = {
													'audi': {
														'a1': [
															{
																title: "2020 - 2023",
																value: "2020-2023"
															},
															{
																title: "2014 - 2019",
																value: "2014-2019"
															},
															{
																title: "2000 - 2013",
																value: "2000-2013"
															}
														],
														'a2': [
															{
																title: "2020 - 2023",
																value: "2020-2023"
															},
															{
																title: "2014 - 2019",
																value: "2014-2019"
															},
															{
																title: "2000 - 2013",
																value: "2000-2013"
															}
														]
													}
												};
												return values[mark][model] || null;
											},
										}
									]
								]
							}
						]
					]
				},
			]
		});
		document.querySelector("#submitFirst").worm.render();
		document.querySelector("#submitFirst").addEventListener('click', async (ev) => {
			ev.preventDefault();
			var values = await ev.currentTarget.worm.retrive();
			console.log(values);
		});
	</script>
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400&family=Roboto:wght@300;400&display=swap" rel="stylesheet">
</body>
</html>